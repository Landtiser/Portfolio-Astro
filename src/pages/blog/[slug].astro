---
import { useStoryblokApi } from "@storyblok/astro";

import BaseHead from "../../components/BaseHead.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";

// Static Paths query pulls all posts from /blog in Storyblok

export async function getStaticPaths() {
  const storyblokApi = useStoryblokApi();

  const { data } = await storyblokApi.get("cdn/links?starts_with=blog/", {
    version: "draft",
  });
  let links = data.links;
  links = Object.values(links);

  return links.map((link) => {
    return {
      params: { slug: link.slug.split("/")[1] },
    };
  });
}

---

<!DOCTYPE html>
<html lang="en">
  <head>
    
  </head>
  <body>
    
    <main>
      
    </main>
    
  </body>
</html>
